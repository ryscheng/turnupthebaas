version: "2"

services:

  frontend:
    restart: "no"
    image: talek-cli
    volumes:
      - ./:/talek_shared
    working_dir: /talek_shared
    command: talekfrontend -l ":8080" --verbose
    network_mode: host
    depends_on:
      - replica0
      - replica1
      - replica2

  replica0:
    restart: "no"
    image: talek-cli
    volumes:
      - ./:/talek_shared
    working_dir: /talek_shared
    command: talekreplica -l ":8081" -c /talek_shared/replica0.json
    network_mode: host

  replica1:
    restart: "no"
    image: talek-cli
    volumes:
      - ./:/talek_shared
    working_dir: /talek_shared
    command: talekreplica -l ":8082" -c /talek_shared/replica1.json
    network_mode: host

  replica2:
    restart: "no"
    image: talek-cli
    volumes:
      - ./:/talek_shared
    working_dir: /talek_shared
    command: talekreplica -l ":8083" -c /talek_shared/replica2.json
    network_mode: host
